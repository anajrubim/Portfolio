<%- include('../partials/header', { title: 'Disciplinas' }) %>
<%- include('../partials/nav', { activePage: 'disciplinas' }) %>

<section class="disciplinas" id="disciplinas">
    <div class="content">
        <div class="title"><span>Minhas Disciplinas</span></div>
        
        <div class="disciplinas-info">
            <p class="disciplinas-description">
                Confira abaixo as disciplinas que já cursei ou estou cursando no curso de 
                <strong><%= estudante.curso %></strong> na <strong><%= estudante.instituicao %></strong>.
            </p>
            
            <div class="disciplinas-grid">
                <% disciplinas.forEach((disciplina, index) => { %>
                    <div class="disciplina-item">
                        <div class="disciplina-number"><%= index + 1 %></div>
                        <div class="disciplina-name">
                            <strong><%= disciplina.nome %></strong>
                            <% if (disciplina.professor) { %>
                                <br><small class="disciplina-info">Professor: <%= disciplina.professor %></small>
                            <% } %>
                            <% if (disciplina.semestre) { %>
                                <br><small class="disciplina-info">Semestre: <%= disciplina.semestre %>º</small>
                            <% } %>
                            <% if (disciplina.status) { %>
                                <br><small class="disciplina-info">Status: <span class="status-<%= disciplina.status %>"><%= disciplina.status %></span></small>
                            <% } %>
                        </div>
                        <form action="/disciplinas/<%= disciplina.id %>?_method=DELETE" method="POST" class="delete-form">
                            <button type="submit" class="btn-delete">Excluir</button>
                        </form>
                    </div>
                <% }); %>
            </div>
            
            <div class="disciplinas-stats">
                <p><strong>Total de disciplinas: <%= disciplinas.length %></strong></p>
            </div>
        </div>
        <div class="form-container">
            <h3 class="form-title">Adicionar Nova Disciplina</h3>
            <form action="/disciplinas" method="POST" class="disciplina-form">
                <input type="text" name="nome" placeholder="Nome da disciplina" required class="form-input">
                <input type="text" name="professor" placeholder="Professor" class="form-input">
                <select name="semestre" class="form-input">
                    <option value="1">1º Semestre</option>
                    <option value="2">2º Semestre</option>
                    <option value="3">3º Semestre</option>
                    <option value="4">4º Semestre</option>
                    <option value="5">5º Semestre</option>
                    <option value="6">6º Semestre</option>
                </select>
                <select name="status" class="form-input">
                    <option value="cursando">Cursando</option>
                    <option value="aprovada">Aprovada</option>
                    <option value="reprovada">Reprovada</option>
                    <option value="trancada">Trancada</option>
                </select>
                <button type="submit" class="btn-submit">Adicionar Disciplina</button>
            </form>
        </div>
    </div>
</section>

<%- include('../partials/footer') %>